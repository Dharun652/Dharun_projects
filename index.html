<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Aquatic Ecosystem Deep Explorer (fixed)</title>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
<style>
  :root{
    --primary-bg:#051923;
    --secondary-bg:#003554;
    --accent:#00a6fb;
    --text:#ffffff;
    --card-bg:rgba(0,20,40,0.75);
    --game-bg:#001219;
    --font-main:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;
  }
  body.light-mode{
    --primary-bg:#e0f7fa;
    --secondary-bg:#b2ebf2;
    --accent:#006064;
    --text:#002233;
    --card-bg:rgba(255,255,255,0.95);
    --game-bg:#b3e5fc;
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    font-family:var(--font-main);
    background:var(--primary-bg);
    color:var(--text);
    transition:background .35s,color .35s;
    overflow-x:hidden;
  }

  /* BG video */
  #bg-video{
    position:fixed;inset:0;width:100%;height:100%;object-fit:cover;z-index:-2;
    filter:brightness(.4);transition:filter .4s;
  }
  body.light-mode #bg-video{filter:brightness(1) opacity(.3)}

  /* navbar */
  .navbar{
    position:fixed;top:0;left:0;right:0;padding:14px 26px;
    display:flex;align-items:center;justify-content:space-between;
    z-index:120;background:linear-gradient(180deg, rgba(0,0,0,.6), transparent);
  }
  .brand{display:flex;gap:10px;align-items:center;font-weight:700;font-size:1.2rem;text-shadow:0 0 10px var(--accent)}
  #modeToggle{cursor:pointer;border-radius:20px;padding:8px 14px;border:1px solid rgba(255,255,255,.15);background:rgba(255,255,255,.06);color:var(--text);backdrop-filter:blur(6px)}
  body.light-mode #modeToggle{background:rgba(0,0,0,.06);color:var(--text);border-color:rgba(0,0,0,.12)}

  /* pages */
  .page{display:none;min-height:100vh;padding-top:84px;padding-bottom:40px;align-items:center;justify-content:flex-start}
  .page.active{display:flex;flex-direction:column;align-items:center}
  .hero-title{font-size:3rem;margin:30px 0;text-shadow:0 4px 18px rgba(0,170,255,.5);animation:floatText 4s ease-in-out infinite}
  @keyframes floatText{0%,100%{transform:translateY(0)}50%{transform:translateY(-10px)}}

  .menu{display:flex;gap:16px;flex-wrap:wrap;justify-content:center;max-width:900px}
  .menu-btn{padding:14px 26px;border-radius:12px;border:1px solid rgba(255,255,255,.12);background:rgba(255,255,255,.06);cursor:pointer;display:flex;gap:10px;align-items:center;font-weight:600;transition:.22s;box-shadow:0 6px 18px rgba(0,0,0,.35)}
  .menu-btn:hover{transform:translateY(-6px);background:var(--accent);box-shadow:0 12px 28px rgba(0,166,251,.25)}

  .card{background:var(--card-bg);padding:34px;border-radius:18px;max-width:980px;width:92%;margin:18px auto;text-align:center;backdrop-filter:blur(8px)}
  .card h2{color:var(--accent);margin:0 0 10px}
  .image-grid{display:flex;gap:12px;flex-wrap:wrap;justify-content:center;margin:16px 0}
  .image-grid img{max-width:350px;height:200px;object-fit:cover;border-radius:10px;box-shadow:0 6px 18px rgba(0,0,0,.3)}

  .back-btn{border-radius:28px;padding:10px 22px;border:2px solid var(--accent);background:transparent;color:var(--text);cursor:pointer;font-weight:700}
  .back-btn:hover{background:var(--accent);color:white}

  /* game */
  .game-stats{display:flex;justify-content:space-between;width:100%;font-weight:700;padding:10px;background:rgba(0,0,0,.18);border-radius:10px}
  #gameBox{width:100%;height:420px;border-radius:12px;background:var(--game-bg);position:relative;overflow:hidden;border:2px solid rgba(255,255,255,.06);box-shadow:inset 0 0 24px rgba(0,0,0,.45)}
  .game-overlay{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;flex-direction:column;background:rgba(0,0,0,.7);z-index:40;border-radius:12px}
  .hidden{display:none !important}
  .play-btn{padding:14px 30px;border-radius:36px;border:none;background:#4cd137;color:#fff;font-weight:800;cursor:pointer;font-size:1.2rem;display:flex;gap:10px;align-items:center}
  .play-btn:hover{transform:scale(1.06)}

  /* entity (image or fallback) */
  .entity{
    position:absolute;width:56px;height:56px;user-select:none;cursor:pointer;transition:transform .08s;z-index:30;pointer-events:auto;
    display:flex;align-items:center;justify-content:center;font-size:34px;
  }
  @media (max-width:600px){.entity{width:46px;height:46px;font-size:28px}}

  /* feedback */
  .feedback{position:fixed;pointer-events:none;font-weight:800;font-size:18px;animation:floatUpFade .8s forwards;z-index:9999}
  .positive{color:#4cd137;text-shadow:0 0 6px rgba(0,0,0,.6)}
  .negative{color:#ff6b6b;text-shadow:0 0 6px rgba(0,0,0,.6)}
  @keyframes floatUpFade{0%{transform:translateY(0);opacity:1}100%{transform:translateY(-36px);opacity:0}}

  /* bubbles */
  #bubbles-container{position:fixed;inset:0;pointer-events:none;z-index:-1}
  .bubble{position:absolute;border-radius:50%;background:rgba(255,255,255,.08);animation:floatUp 9s linear infinite}
  @keyframes floatUp{0%{transform:translateY(0);opacity:0}50%{opacity:.6}100%{transform:translateY(-110vh);opacity:0}}

  /* responsive */
  @media (max-width:600px){.hero-title{font-size:2rem}.menu-btn{width:100%;justify-content:center;padding:12px}}
</style>
</head>
<body>

<!-- background video -->
<video autoplay muted loop playsinline id="bg-video">
  <source src="https://assets.mixkit.co/videos/preview/mixkit-under-water-view-of-the-ocean-surface-1227-large.mp4" type="video/mp4">
</video>

<div id="bubbles-container"></div>

<nav class="navbar">
  <div class="brand">
    <img src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/72x72/1f30a.png" width="28" height="28" alt="wave">
    Deep Explorer
  </div>
  <button id="modeToggle" onclick="toggleMode(
